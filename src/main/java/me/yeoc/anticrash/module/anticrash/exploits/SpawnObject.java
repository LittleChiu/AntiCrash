package me.yeoc.anticrash.module.anticrash.exploits;

import me.yeoc.anticrash.module.anticrash.IExploit;
import net.minecraft.network.Packet;
import net.minecraft.network.play.server.S0EPacketSpawnObject;

public class SpawnObject implements IExploit {

    int lastEntityID = 0;
//    Set<Integer> entities = new HashSet<>();
//    TimerUtil timerUtil = new TimerUtil();
//    Timer timer = new Timer();
//    TimerTask timerTask;
    @Override
    public boolean handlePacket(Packet<?> packet) {
        if (!(packet instanceof S0EPacketSpawnObject)) return true;
        S0EPacketSpawnObject p = (S0EPacketSpawnObject) packet;

        if (lastEntityID != 0 && Math.abs(p.getEntityID()-lastEntityID) >= 1000000){
            return false;
        }
        lastEntityID = p.getEntityID();
        return true;
//        System.out.println(p.getPitch());
//        System.out.println(p.getSpeedX());
//        System.out.println(p.getSpeedY());
//        System.out.println(p.getSpeedZ());
//
//        System.out.println(p.getEntityID());
//        return p.getY() < 255;
//        if (entities.contains(p.getEntityID())){
//            return false;
//        }else{
//            if (timerTask != null){
//                timerTask = new TimerTask() {
//                    @Override
//                    public void run() {
//                        entities.clear();
//                        timerTask = null;
//                    }
//                };
//                timer.schedule(timerTask,1000*10);
//            }
//            entities.add(p.getEntityID());
////            if (timerUtil.sleep(30000)){
////                timer.schedule(;
////            }
//        }
//        return true;
//        //System.out.println(System.currentTimeMillis() - lastHandle);
    }
}
